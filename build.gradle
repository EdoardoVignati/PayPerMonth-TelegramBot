plugins {
    id 'java'
}

apply plugin: 'application'
mainClassName = "com.paypermonth.bot.Main"

version '1.0.0'

sourceCompatibility = 1.8


repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    compile fileTree(dir: 'library', include: '*.jar')
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile "org.telegram:telegrambots:3.6"
    compile(group: 'postgresql', name: 'postgresql', version: '9.0-801.jdbc4')

}

apply plugin: 'java'

jar {
    manifest {
        attributes 'Main-Class': 'com.paypermonth.bot.Main'
    }
}

task fatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': 'com.paypermonth.bot.Main'
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}

repositories {
    maven { url 'http://repo1.maven.org/maven2' }
    jcenter { url "http://jcenter.bintray.com/" }
}


task stage() {
    dependsOn clean, jar, fatJar
}